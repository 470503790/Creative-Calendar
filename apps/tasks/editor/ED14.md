# ED14 — 性能专项：脏矩形/批量刷新/节流 & 崩溃恢复

> **阶段**：前端（uni-app · Vue3 + TS · mp-weixin） · **数据**：Mock  
> **路径适配**：所有实现均位于 `apps/miniapp/pages/editor/**` 下。

## 目标（Goal）
- 脏矩形重绘、rAF 批量刷新、事件节流；定时自动保存与崩溃恢复。

## 修改范围（Scope）
- `apps/miniapp/pages/editor/core/renderer.ts: invalidate(rect)`；`apps/miniapp/pages/editor/store`（如有）或 `index.vue` 中的自动保存与恢复入口。

## 实施步骤（How to）
1) 脏矩形：合并重叠区域后重绘，提供“强制全量重绘”开关。
2) 事件统一节流；一帧内批处理刷新。
3) 每 10s 自动保存 `scene` 到本地；异常重启后提示恢复草稿。

## 验收标准（Definition of Done）
- [ ] 复杂场景帧率提升
- [ ] 崩溃（模拟）后可恢复到 10s 内状态

## 测试方案（Testing）
- 100+ layer 变换帧时统计
- 手动抛错后恢复路径

## 风险与回滚（Risks & Rollback）
- 过度优化导致渲染不一致 → 提供强制全量重绘开关

## 估时与负责人（Estimate & Owner）
- 估时：1d
- 负责人：@待指派
