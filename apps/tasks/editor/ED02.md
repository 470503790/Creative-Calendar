# ED02 — 画布渲染与视口：dpi 缩放、平移/缩放手势、坐标系

> **阶段**：前端（uni-app · Vue3 + TS · mp-weixin） · **数据**：Mock  
> **路径适配**：所有实现均位于 `apps/miniapp/pages/editor/**` 下。

## 目标（Goal）
- DPR 清晰渲染；世界↔屏幕坐标；双指缩放/拖拽平移/双击居中。

## 修改范围（Scope）
- `apps/miniapp/pages/editor/core/renderer.ts` 与 `apps/miniapp/pages/editor/index.vue`；可新增 `components/CanvasView.vue`（位于 `apps/miniapp/components/editor/`）。

## 实施步骤（How to）
1) DPR：canvas 宽高 = CSS 尺寸 * dpr；`ctx.scale(dpr*scale)`。
2) 视口：`scale/tx/ty/dpr`；提供 `worldToScreen/screenToWorld`。
3) 手势：双指缩放（锚点=手势中心）、拖拽平移、双击居中选区。
4) rAF 批量刷新；move 事件节流。

## 验收标准（Definition of Done）
- [ ] 任意分辨率清晰
- [ ] 缩放/平移流畅；100 layer ≥40fps（模拟）

## 测试方案（Testing）
- 单测：坐标换算
- 真机：低端/主流各 1 台

## 风险与回滚（Risks & Rollback）
- 小程序 canvas 差异 → 用 `<canvas type="2d">` 标准接口

## 估时与负责人（Estimate & Owner）
- 估时：1d
- 负责人：@待指派
