# ED07 — 历史记录：100 步撤销/重做（差量快照）

> **阶段**：前端（uni-app · Vue3 + TS · mp-weixin） · **数据**：Mock  
> **规范**：结合《创意日历 App 全套界面与产品规范 V1》（画布最新版）

## 目标（Goal）
- 统一接入命令总线；差量快照 + 节流；100 步历史。

## 修改范围（Scope）
- `core/commands.ts`、`stores/editor.ts`、`utils/diff.ts`

## 实施步骤（How to）
1) 图层 CRUD/变换/分组/属性修改全部封装命令。
2) 保存差量快照（小对象深拷贝，图片仅存引用）。
3) 拖动等高频操作合并为一条记录。

## 验收标准（Definition of Done）
- [ ] 100 步撤销/重做稳定
- [ ] 内存占用可观测（简单计数）

## 测试方案（Testing）
- 长链路编辑回到初始
- 删除后撤销恢复

## 风险与回滚（Risks & Rollback）
- 大对象拷贝成本 → 仅存补丁或限制步数

## 估时与负责人（Estimate & Owner）
- 估时：1d
- 负责人：@待指派
