# ED07 — 历史记录：100 步撤销/重做（差量快照）

> **阶段**：前端（uni-app · Vue3 + TS · mp-weixin） · **数据**：Mock  
> **路径适配**：所有实现均位于 `apps/miniapp/pages/editor/**` 下。

## 目标（Goal）
- 统一接入命令总线；差量快照 + 节流。

## 修改范围（Scope）
- `apps/miniapp/pages/editor/core/commands.ts` 与编辑动作封装。

## 实施步骤（How to）
1) 图层 CRUD/变换/分组/属性修改封装命令。
2) 差量快照；拖动等高频合并一条。
3) 历史上限 100 步，可配置。

## 验收标准（Definition of Done）
- [ ] 撤销/重做稳定
- [ ] 内存占用可观测

## 测试方案（Testing）
- 长链路编辑回到初始
- 删除后撤销恢复

## 风险与回滚（Risks & Rollback）
- 大对象拷贝成本 → 仅存补丁或限制步数

## 估时与负责人（Estimate & Owner）
- 估时：1d
- 负责人：@待指派
