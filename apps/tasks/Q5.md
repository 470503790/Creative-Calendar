# Q5 — 路由守卫与参数校验（Fallback/404）

> **阶段**：前端优先（uni-app, Vue3 + TS, mp-weixin） · **数据**：Mock  
> **规范**：参考《创意日历 App 全套界面与产品规范 V1》（最新）

## 目标（Goal）
- 在 uni-app 约束下实现 **轻量路由守卫**：参数校验、非法路由回退、找不到资源的降级。

## 修改范围（Scope）
- `utils/router-guard.ts`（包装 `navigateTo`/`reLaunch`）
- `pages/fallback/404`/`pages/fallback/empty`

## 输入与依赖（Inputs & Dependencies）
- 输入：规范中的错误与空状态
- 依赖：R1 完成

## 输出（Deliverables）
- 统一的路由调用入口与兜底页

## 实施步骤（How to）
1. 实现 `safeNavigateTo(url, opts)`：解析校验 `id/pid` 等参数，不合法则跳 `/pages/fallback/404`。
2. 详情页/作者页/作品详情调用 `safeNavigateTo`。

## 验收标准（Definition of Done）
- [ ] 传入无效 id 能回退到兜底页
- [ ] 兜底页提供返回首页的按钮

## 测试方案（Testing）
- 伪造无效参数路径进行验证

## 风险与回滚（Risks & Rollback）
- 与原生导航混用 → 在关键路径统一替换

## 估时与负责人（Estimate & Owner）
- 估时：0.5d
- 负责人：@待指派
