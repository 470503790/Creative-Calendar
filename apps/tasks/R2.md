# R2 — Onboarding A1–A4 路由与首启引导开关

> **阶段**：前端优先（uni-app, Vue3 + TS, mp-weixin） · **数据**：Mock  
> **规范**：参考《创意日历 App 全套界面与产品规范 V1》（最新）

## 目标（Goal）
- 实现 A1–A4 四屏并 **接入首启判断**：未完成引导则优先进入 A1，完成后落地首页。

## 修改范围（Scope）
- `pages/onboarding/welcome`、`preferences`、`permissions`、`profile`
- `utils/prefs.ts`（本地持久化：`onboarded`/`prefs`）
- `App.vue` 首启重定向逻辑

## 输入与依赖（Inputs & Dependencies）
- 输入：规范中 A1–A4 原型与字段
- 依赖：R1（确保路由注册无遗漏）

## 输出（Deliverables）
- 4 个 Onboarding 页面 + 本地存储 + 首启跳转

## 实施步骤（How to）
1. 新建 4 个页面并加入 `pages.json`（隐藏在 TabBar 之外）。
2. `utils/prefs.ts` 暴露 `getOnboarded/setOnboarded/getPrefs/setPrefs`。
3. 在 `App.vue` `onLaunch`：如 `!onboarded` 则 `reLaunch('/pages/onboarding/welcome')`，完成最后一步后写入 `onboarded=true` 并跳首页。
4. 权限页仅做 **权限意图说明**（不调用系统权限）。

## 验收标准（Definition of Done）
- [ ] 首次进入触发 A1，引导完成后落地首页
- [ ] 再次进入不再出现引导（可在设置里“重置引导”）

## 测试方案（Testing）
- 清空本地存储验证首启
- 路径中断/返回继续验证

## 风险与回滚（Risks & Rollback）
- 过早触发权限弹窗 → 当前阶段仅说明，不弹系统权限

## 估时与负责人（Estimate & Owner）
- 估时：1d
- 负责人：@待指派
